
 프로세스와 실행.
 26 ~ 33강.



 # 컴퓨터의 구조.

저장장치 storage.
SSD, HDD.
가격이 싸다, 저장 용량이 크다, 속도가 느리다.

메모리 memory.
DDR - RAM.
가격이 비싸다, 저장 용량이 작다, 속도가 빠르다.

프로세서 processor.
중앙처리장치 - CPU.

컴퓨터의 실행과정.
1. 프로그램은 저장장치에 설치되어있다.
2. 프로그램을 실행하면 저장장치에 데이터가 메모리에 적재된다.
3. 메모리에 적재된 데이터를 CPU에서 사용해서 연산한다.

용어 정리.
program : 저장장치에 저장되어 있는 파일.
process : Memory에 적재된 프로그램 - 실행하고 있는 프로그램.



 # 프로세스 모니터링.

ps 관련.
ps : 프로세스 리스트를 보여줌.
ps aux : 현재 실행중인 프로세스 리스트를 전부 보여줌.
ps aux | grep apach : 현재 실행중인 프로세스 리스트에서 apache를 찾음.

프로세스.
pid : 프로세스마다 부여되는 id.
sudo kill pid : 프로세스를 강제로 종료시킴.

htop 관련.
sudo apt-get install htop : htop 설치하기.
sudo apt-get upgrade htop : htop 업데이트하기.
CPU 코어, 메모리 상태 등을 볼 수 있다.
Load average : CPU의 점유율과 관련됨. ( 1분, 5분, 15분 )



 # 백그라운드 실행.

멀티 프로세스.
포그라운드 프로세스 : 현재 유저가 사용하고 있는 프로그램.
백그라운드 프로세스 : 현재 유저가 사용하지 않지만 실행되고 있는 프로그램.

단축키.
ctrl + z : 실행중인 프로그램을 백그라운드로 보내는 단축키.

명령어.
fg : 포그라운드 프로세스를 변경.
fg 숫자 : jobs에서 확인한 프로세스 번호를 입력해서 포그라운드 프로세스로 변경.
jobs : 현재 백그라운드에 존재하는 프로그램을 확인.



 # 데몬의 개념.

데몬의 특성.
항상 실행되고 있다.
서버와 관련된 프로그램들은 항상 켜져 있어야 되서 데몬으로 되어 있다.



 # service와 자동실행.

/etc/init.d/
데몬 프로그램 저장.

apache 시작/종료.
sudo service apache2 start
sudo service apache2 stop

데몬 프로그램.
service라는 명령어를 통해 시작, 종료를 해야된다.
대부분 start, stop을 가지고 있어서 apache 예시처럼 시작, 종료한다.

실행과 동시에 시작해야되는 데몬 저장.
/etc/rc3.d/ : CLI방식일 때 실행과 동시에 시작해야되는 데몬 저장. ( 링크파일로 저장 )
/etc/rc5.d/ : GUI방식일 때 실행과 동시에 시작해야되는 데몬 저장. ( 링크파일로 저장 )
파일이름이 S로 시작하면 시작, K로 시작하면 시작하지 않는다.



 # 정기적 실행 cron1.

cron 생성하기.
crontap -e ( 크론 생성 ) -> 에디터 설정 ( 1 ~ 4 ) -> 주기설정 ( 분, 시, 날짜, 월, 요일, 실행할 코드 )
사용시 crontab expression을 통해 자세히 알아보자.

명령어.
tail 파일이름 : 마지막 행을 기준으로 지정한 부분까지 파일 내용을 보여준다.




 # 정기적 실행 cron2.

사례.
1만개의 메일을 보내는 작업을 진행한다고 했을 때.
1. Server측에서 정보를 확인하고 데이터를 전달 받았다고 클라이언트에 전달한다.
2. Server측에서 crone을 통해 여유가 있을때마다 메일을 전달한다.
장점 - 클라이언트측에서 백그라운드 프로세스처리를 하지 않아도된다.



 # 쉘을 시작할 때 실행.

startup 설정.
쉘을 시작할 때 명령어 실행을 설정하는 것.

명령어.
alias a='ls -al' : command에 a를 입력하면 ls -al이 실행됨.

bash 설정.
1. /home 디렉토리로 이동.
2. nano .bashrc
3. 실행할 내용 적기 ( ex - echo ' hi , bash ' ) ;

설정 확인하기.
bash -> .bashrc에 작성한 코드가 잘 실행되는지 확인.



